{
  "default":{
    "name":"${serviceName}",
    "log-driver":"gelf",
    "log-opt":["gelf-address=udp://${logstash_ip}:12201", "tag=\"${serviceName}\""],
    "constraint":["engine.labels.nodetype==worker"],
    "publish":["mode=host,target=3037,published=3037,protocol=tcp"],
    "host":["consul:172.17.0.1"],
    "env":[
            "SERVICE_NAME=${serviceName}",
            "SERVICE_3037_CHECK_HTTP=/api/health/check",
            "SERVICE_3037_CHECK_INTERVAL=15s",
            "SERVICE_3037_CHECK_TIMEOUT=3s",
            "MYSQL_PASSWORD=${SECRET_:env_MYSQL}",
            "MYSQL_DATABASE=${serviceName}",
            "MYSQL_USER=${serviceName}",
            "RABBITMQ_USER=${SECRET_:env_RABBITMQUSER}",
            "RABBITMQ_PASS=${SECRET_:env_RABBITMQPASS}",
            "OXALIS_HOME=/run/secrets"
           ],
    "oc-db-init":{"populate-test-data":"true"},
    "oc-consul-injection":{
      "redis/password": "${SECRET_:env_REDIS}",
      "mq/user": "${SECRET_:env_RABBITMQUSER}",
      "mq/password": "${SECRET_:env_RABBITMQPASS}"
    },
    "oc-secret-injection": {
      "oxalis-keystore.jks": {"encoding": "base64", "value": "${SECRET_:env_PEPPOLKEYSTORE}"},
      "oxalis.conf": {"encoding": "base64", "value": "${OXALIS_CONF}"}
    }
  }
}
